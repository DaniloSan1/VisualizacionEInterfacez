<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Subir material - Apunti</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="css/estiloHome.css" />
    <link rel="stylesheet" href="css/subirMaterial.css" />
  </head>
  <body class="upload-page-body">
    <div id="header-placeholder"></div>

    <main class="main-content-fixed">
      <div class="container upload-container">
        <div id="headerSection">
          <div class="breadcrumb-wrapper">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb breadcrumb-clean mb-0">
                <li class="breadcrumb-item"><a href="home.html">Inicio</a></li>
                <li class="breadcrumb-item active" aria-current="page">
                  Subir material
                </li>
              </ol>
            </nav>
          </div>

          <div class="text-center mb-4">
            <h1 class="page-title-green" id="pageTitle">
              Compartí material para ver contenido exclusivo
            </h1>
          </div>

          <div class="progress-wrapper mb-4">
            <div class="steps-container">
              <div class="step active" id="progress-step-1">
                <div class="dot-ring filled"></div>
                <span class="label">Subir</span>
              </div>
              <div class="line" id="line-1"></div>
              <div class="step" id="progress-step-2">
                <div class="dot-ring"></div>
                <span class="label">Detalles</span>
              </div>
              <div class="line" id="line-2"></div>
              <div class="step" id="progress-step-3">
                <div class="dot-ring"></div>
                <span class="label">Revisar</span>
              </div>
            </div>
          </div>
        </div>

        <div class="card step-card-unified" id="mainCard">
          <div id="step-content-1" class="step-content active fade-in">
            <div
              class="d-flex flex-column align-items-center justify-content-center h-100"
            >
              <h2 class="card-inner-title text-center">Subí tu documento</h2>
              <div class="dropzone-area">
                <div class="upload-icon">
                  <svg
                    width="40"
                    height="40"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17 8 12 3 7 8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                  </svg>
                </div>
                <p class="dropzone-text">Arrastra el archivo o</p>
                <button class="btn btn-login" onclick="nextStep(2)">
                  Buscar archivo
                </button>
              </div>
              <p class="text-muted text-center mt-3 small mb-0">
                Podés subir apuntes, parciales o resúmenes en PDF (máx. 50 MB)
              </p>
            </div>
          </div>

          <div id="step-content-2" class="step-content fade-in">
            <div class="row gx-5 h-100">
              <div
                class="col-md-4 d-flex flex-column justify-content-center align-items-center bg-preview-col"
              >
                <div class="pdf-preview-box">
                  <div class="pdf-skeleton">
                    <div class="skeleton-line title-line"></div>
                    <div class="skeleton-line"></div>
                    <div class="skeleton-line"></div>
                    <div class="skeleton-block"></div>
                  </div>
                  <div class="pdf-filename-tag">EjemploNombre.PDF</div>
                </div>
              </div>
              <div
                class="col-md-8 d-flex flex-column justify-content-center form-col ps-md-4"
              >
                <div class="mb-2">
                  <input
                    type="text"
                    class="form-control form-control-pill"
                    placeholder="Titulo"
                  />
                </div>
                <div class="mb-2">
                  <input
                    type="text"
                    class="form-control form-control-pill"
                    placeholder="Descripcion"
                  />
                </div>
                <div class="mb-2">
                  <select class="form-select form-select-pill">
                    <option selected>Departamento</option>
                    <option>Ingeniería</option>
                  </select>
                </div>
                <div class="mb-2">
                  <select class="form-select form-select-pill">
                    <option selected>Carrera</option>
                    <option>Diseño</option>
                  </select>
                </div>
                <div class="mb-2">
                  <select class="form-select form-select-pill">
                    <option selected>Materia</option>
                    <option>UX/UI</option>
                  </select>
                </div>
                <div class="mb-2">
                  <select class="form-select form-select-pill">
                    <option selected>Comisión</option>
                    <option>C1</option>
                  </select>
                </div>
                <div class="mb-0">
                  <select class="form-select form-select-pill">
                    <option selected>Tipo De Material</option>
                    <option>Apunte</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="action-buttons-row mt-4">
              <button class="btn btn-login-back" onclick="prevStep(1)">
                Volver
              </button>
              <button class="btn btn-login" onclick="nextStep(3)">
                Siguiente
              </button>
            </div>
          </div>

          <div id="step-content-3" class="step-content fade-in">
            <div class="row h-100 align-items-center">
              <div class="col-md-4 d-flex justify-content-center">
                <div class="pdf-preview-box-review">
                  <div class="pdf-skeleton opacity-50">
                    <div class="skeleton-line title-line"></div>
                    <div class="skeleton-line"></div>
                    <div class="skeleton-line"></div>
                    <div class="skeleton-block"></div>
                    <div class="skeleton-line"></div>
                  </div>
                </div>
              </div>
              <div class="col-md-8 ps-md-4 text-start">
                <h3 class="review-doc-title">Mapa Unidad 2 – Interfaces</h3>
                <p class="review-doc-desc">
                  Resumen completo de la teórica + ejemplos vistos en clase.
                </p>
                <div class="review-meta-list">
                  <div class="meta-row">
                    <span class="meta-label">Departamento:</span>
                    <span class="meta-val">Ingeniería</span>
                  </div>
                  <div class="meta-row">
                    <span class="meta-label">Carrera:</span>
                    <span class="meta-val">Tec. Universitario en Web</span>
                  </div>
                  <div class="meta-row">
                    <span class="meta-label">Materia:</span>
                    <span class="meta-val">Visualización e interfaces</span>
                  </div>
                  <div class="meta-row">
                    <span class="meta-label">Comisión:</span>
                    <span class="meta-val">COM1920</span>
                  </div>
                  <div class="meta-row">
                    <span class="meta-label">Tipo de material:</span>
                    <span class="meta-val">Apunte</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="action-buttons-row mt-4">
              <button class="btn btn btn-login-back" onclick="prevStep(2)">
                Volver
              </button>
              <button class="btn btn-login" onclick="finishUpload()">
                Finalizar
              </button>
            </div>
          </div>
        </div>
        <div
          id="successMessageContainer"
          class="text-center d-none flex-column justify-content-center align-items-center h-100 w-100 fade-in"
        >
          <div class="success-icon mb-4">
            <svg
              width="100"
              height="100"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle cx="12" cy="12" r="12" fill="#3f9b7b" />
              <path
                d="M17.3333 8L9.99996 15.3333L6.66663 12"
                stroke="white"
                stroke-width="3"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>
          <h2 class="success-title">¡Gracias por compartir!</h2>
          <p class="success-desc">
            Tu apunte ya está disponible para otros estudiantes de la UNLaM.<br />
            Ahora podés acceder al material compartido por la comunidad.
          </p>
          <div class="d-flex gap-3 mt-4">
            <a href="searchResults.html" class="btn btn-login-back"
              >Buscar material</a
            >
            <a href="stepper.html" class="btn btn-login"
              >Subir otro documento</a
            >
          </div>
        </div>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/components-loader.js"></script>

    <script>
      // Navegación
      function nextStep(targetStep) {
        updateView(targetStep);
      }

      function prevStep(targetStep) {
        updateView(targetStep);
      }

      function finishUpload() {
        // 1. Ocultar la cabecera (Breadcrumb, Título, Progreso)
        document.getElementById("headerSection").style.display = "none";

        // 2. Ocultar la tarjeta blanca principal
        document.getElementById("mainCard").style.display = "none";

        // 3. Mostrar el mensaje de éxito
        const successDiv = document.getElementById("successMessageContainer");
        successDiv.classList.remove("d-none");
        successDiv.classList.add("d-flex");
      }

      function hideAllContentSteps() {
        document
          .querySelectorAll(".step-content")
          .forEach((el) => el.classList.remove("active"));
      }

      function updateView(step) {
        hideAllContentSteps();
        document.getElementById(`step-content-${step}`).classList.add("active");

        const titles = [
          "Compartí material para ver contenido exclusivo",
          "Compartí material para ver contenido exclusivo",
          "Revisá los datos",
        ];
        document.getElementById("pageTitle").innerText = titles[step - 1];

        updateProgressBar(step);
      }

      function updateProgressBar(step) {
        const s1 = document.getElementById("progress-step-1");
        const s2 = document.getElementById("progress-step-2");
        const s3 = document.getElementById("progress-step-3");
        const l1 = document.getElementById("line-1");
        const l2 = document.getElementById("line-2");

        // Reset
        [s2, s3].forEach((s) => s.classList.remove("active", "completed"));
        [l1, l2].forEach((l) => l.classList.remove("active"));
        s2.querySelector(".dot-ring").classList.remove("filled");
        s3.querySelector(".dot-ring").classList.remove("filled");

        // Paso 1 siempre lleno
        s1.classList.add("completed");
        s1.querySelector(".dot-ring").classList.add("filled");

        if (step === 2) {
          l1.classList.add("active");
          s2.classList.add("active");
        } else if (step === 3) {
          l1.classList.add("active");
          s2.classList.add("completed");
          s2.querySelector(".dot-ring").classList.add("filled");
          l2.classList.add("active");
          s3.classList.add("active");
        }
      }
    </script>
    <script>
      function checkAutoCenter() {
        const main = document.querySelector(".main-content-fixed");
        const contentHeight = main.scrollHeight;
        const viewportHeight = window.innerHeight;

        if (contentHeight < viewportHeight - 100) {
          main.classList.add("auto-center");
        } else {
          main.classList.remove("auto-center");
        }
      }

      window.addEventListener("load", checkAutoCenter);
      window.addEventListener("resize", checkAutoCenter);
    </script>
    <script>
      function checkAutoCenter() {
        const main = document.querySelector(".main-content-fixed");
        const contentHeight = main.scrollHeight;
        const viewportHeight = window.innerHeight;

        if (contentHeight < viewportHeight - 100) {
          main.classList.add("auto-center");
        } else {
          main.classList.remove("auto-center");
        }
      }

      window.addEventListener("load", checkAutoCenter);
      window.addEventListener("resize", checkAutoCenter);
    </script>

    <!-- Footer modular -->
    <div id="footer-placeholder"></div>
    <script src="js/components-loader.js"></script>

    <script src="js/components-loader.js"></script>
  </body>
</html>
